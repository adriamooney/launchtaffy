<template name="companies">

	<div class="page-header">
	  <h1>Browse Companies</h1>
	</div>

	{{#if companies}}

			{{>companySearch}}

    		{{> pages}}
    		{{> pagesNav}}  <!--navigation-->

	{{else}}
		<div class="alert alert-info" role="alert"><strong>We're sorry,</strong> there are no active companies at this time. Check again soon.</div>
	{{/if}}
</template>

<template name="companyItem">
	<div class="panel panel-default">
		<div class="panel-body">
				
				<div class="media">
				  <div class="media-left">
				    <a href="/company/{{this._id}}">
				      {{# if logoUrl}}
				      	<img class="media-object" src="{{logoUrl}}" alt="{{name}}" />
				      	{{else}}
				      	<img class="media-object" src="" alt="" style="width:60px;height:60px;background:#ccc;border:1px solid #666"/>
				      {{/if}}
				    </a>
				  </div>
				  <div class="media-body">
				    <h4 class="media-heading"><a href="/company/{{this._id}}">{{name}}</a> <span class="label label-success">{{numSales}}</span></h4>
				    	{{#if description}}
							<p>{{description}}</p>
							{{else}}
							<p>No Description for this Company</p>
						{{/if}}
				  </div>
				</div>

		</div>
	</div>
</template>

<template name="companySearch">
    <div class="form-group">{{> esInput index="companiesIndex" placeholder="Search..." class="form-control"}}</div>

    {{#esEach index="companiesIndex"}}
        {{>companyItem}}
    {{/esEach}}


    {{> esLoadMoreButton index="companiesIndex"}}

    {{#ifEsHasNoResults index="companiesIndex"}}
        <div class="no-results">No results found!</div>
    {{/ifEsHasNoResults}}

    {{#ifEsIsSearching index="companiesIndex"}}
            <div>Loading...</div>
    {{/ifEsIsSearching}}
</template>
