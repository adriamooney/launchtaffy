<template name="company">
  
  	{{# if thisCompany}}
  	{{>updateCompanyForm}}
  	
  	{{ else }}
		<h1>{{this.name}}</h1>
		<p>{{this.description}}</p>
		<p><a href="{{this.website}}">{{this.website}}</a></p>
		{{#if currentUser}}
		<form id="contactCompany">Send Message
			<div class="form-group"><textarea id="message" class="form-control"></textarea></div>
			<button class="btn btn-primary" type="submit">Submit</button> 
		</form>
		{{/if}}
  	{{/if}}

</template>

<template name="updateCompanyForm">
	Update Company Info

  {{#autoForm collection="Companies" id="updateCompanyForm" type="update" doc=this}}
  <fieldset>
    <legend>Company Info</legend>
    {{> afQuickField name='name' value=this.name}}
    {{> afQuickField name='website' value=this.website}}
    {{> afQuickField name='description' rows=6 value=this.description}}
    {{> afFieldInput name='accountIsActive' value=this.accountIsActive}}
  </fieldset>
  <button type="submit" class="btn btn-primary">Submit</button>
  {{/autoForm}}
</template>

<template name="updateCompanyFormOnProfile">
  Update Company Info
  <!--this is not right this.companyId is not right. need to write a template helper-->
  {{#autoForm collection="Companies" id="updateCompanyForm" type="update" doc=usersCompany}}
  <fieldset>
    <legend>Company Info</legend>
    {{> afQuickField name='name' value=this.name}}
    {{> afQuickField name='website' value=this.website}}
    {{> afQuickField name='description' rows=6 value=this.description}}
    {{> afFieldInput name='accountIsActive' value=this.accountIsActive}}
  </fieldset>
  <button type="submit" class="btn btn-primary">Submit</button>
  {{/autoForm}}
</template>


<template name="companyProfile">
  {{>insertCompanyForm}}
</template>

<template name="insertCompanyForm">
  {{#autoForm collection="Companies" id="insertCompanyForm" type="insert"}}
  <fieldset>
    <legend>Company Info</legend>
    {{> afQuickField name='name' value=''}}
    {{> afQuickField name='website' value=''}}
    {{> afQuickField name='description' rows=6 value=''}}
    {{> afFieldInput name='accountIsActive' type='hidden' value='true'}}

    {{> afFieldInput name='companyId' type='hidden' value=currentUser._id}}
  </fieldset>
  <button type="submit" class="btn btn-primary">Submit</button>
  {{/autoForm}}
</template>





